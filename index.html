<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Inventario Pantallas y Bater√≠as</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#020617;
  --panel:#0f172a;
  --panel-soft:#111827;
  --border:#1e293b;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --primary:#38bdf8;
  --primary-hover:#0ea5e9;
  --green:#22c55e;
  --yellow:#facc15;
  --red:#ef4444;
}

*{ box-sizing:border-box }

body{
  margin:0;
  font-family:system-ui, sans-serif;
  background:linear-gradient(135deg,#020617,#0f172a);
  color:var(--text);
}

header{
  padding:20px;
  border-bottom:1px solid var(--border);
}

main{
  padding:24px;
  max-width:1400px;
  margin:auto;
}

.panel{
  background:linear-gradient(180deg,var(--panel),var(--panel-soft));
  border:1px solid var(--border);
  border-radius:14px;
  padding:20px;
  margin-bottom:20px;
}

input,select,button{
  padding:8px 10px;
  border-radius:10px;
  border:1px solid var(--border);
  background:#020617;
  color:var(--text);
}

button{
  background:var(--primary);
  color:#020617;
  font-weight:600;
  cursor:pointer;
}

button:hover{ background:var(--primary-hover) }

table{
  width:100%;
  border-collapse:collapse;
  margin-top:12px;
}

th,td{
  padding:12px;
  border-bottom:1px solid var(--border);
}

.badge{
  padding:4px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
}

.pantalla{ background:rgba(34,197,94,.15); color:var(--green) }
.bateria{ background:rgba(250,204,21,.2); color:var(--yellow) }

.actions button{ margin-right:6px }
.in{ background:rgba(34,197,94,.25); color:var(--green) }
.out{ background:rgba(239,68,68,.25); color:var(--red) }
.del{ background:rgba(148,163,184,.2) }

details{
  margin-top:12px;
}
</style>
</head>

<body>

<header>
  <h2>Inventario de Pantallas y Bater√≠as</h2>
  <div style="color:var(--muted)">Con descripci√≥n y control interno de costos</div>
</header>

<main>

<div class="panel">
<h3>Agregar modelo</h3>

<select id="type">
  <option value="pantalla">Pantalla</option>
  <option value="bateria">Bater√≠a</option>
</select>

<input id="model" list="models" placeholder="Modelo (ej: iPhone 11)">
<input id="desc" placeholder="Descripci√≥n (ej: Con marco / OLED)">

<datalist id="models"></datalist>

<button id="addModel">Agregar</button>
</div>

<div class="panel">
<h3>Inventario</h3>

<input id="search" placeholder="Buscar modelo">

<table>
<thead>
<tr>
  <th>Modelo</th>
  <th>Tipo</th>
  <th>Descripci√≥n</th>
  <th>Cantidad</th>
  <th>Acciones</th>
</tr>
</thead>
<tbody id="table"></tbody>
</table>
</div>

<div class="panel">
<h3>Historial de movimientos</h3>
<table>
<thead>
<tr>
  <th>Fecha</th>
  <th>Modelo</th>
  <th>Acci√≥n</th>
  <th>Cantidad</th>
</tr>
</thead>
<tbody id="logs"></tbody>
</table>

<details>
  <summary>üìä Ver historial de costos (interno)</summary>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Modelo</th>
        <th>Cantidad</th>
        <th>Precio unitario</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody id="costs"></tbody>
  </table>
</details>

</div>

</main>

<script>
const K_STOCK='inv_stock';
const K_LOG='inv_log';
const K_MODELS='inv_models';
const K_COSTS='inv_costs';

const read=(k,d=[])=>JSON.parse(localStorage.getItem(k)||JSON.stringify(d));
const write=(k,v)=>localStorage.setItem(k,JSON.stringify(v));

let stock=read(K_STOCK);
let logs=read(K_LOG);
let costs=read(K_COSTS);

let models = read(K_MODELS, [
  // iPhone
  'iPhone 8',
  'iPhone 8 Plus',
  'iPhone X',
  'iPhone XR',
  'iPhone XS',
  'iPhone XS Max',
  'iPhone 11',
  'iPhone 11 Pro',
  'iPhone 11 Pro Max',
  'iPhone 12',
  'iPhone 12 Pro',
  'iPhone 12 Pro Max',
  'iPhone 13',
  'iPhone 13 Pro',
  'iPhone 13 Pro Max',
  'iPhone 14',
  'iPhone 14 Pro',
  'iPhone 14 Pro Max',
  'iPhone 15',
  'iPhone 15 Pro',
  'iPhone 15 Pro Max',
  'iPhone 16',
  'iPhone 16 Pro',
  'iPhone 16 Pro Max',
  'iPhone 17',
  'iPhone 17 Pro',
  'iPhone 17 Pro Max',

  // Samsung Galaxy S
  'Samsung S21 Ultra',
  'Samsung S22 Ultra',
  'Samsung S23 Ultra',
  'Samsung S24 Ultra',
  'Samsung S25 Ultra'
]);

const modelsList=document.getElementById('models');
const refreshModels=()=>{
  modelsList.innerHTML=models.map(m=>`<option value="${m}">`).join('');
};
refreshModels();

addModel.onclick=()=>{
  const model=modelInput.value.trim();
  const desc=descInput.value.trim();
  const type=typeSelect.value;
  if(!model) return;

  if(!models.includes(model)){
    models.push(model);
    write(K_MODELS,models);
    refreshModels();
  }

  if(stock.find(i=>i.model===model && i.type===type && i.desc===desc)) return;

  stock.push({id:Date.now(),model,type,desc,qty:0});
  write(K_STOCK,stock);
  render();
};

function move(id,dir){
  const qty=parseInt(prompt('Cantidad'));
  if(!qty||qty<=0) return;

  const item=stock.find(i=>i.id===id);

  if(dir==='out' && item.qty<qty){
    alert('Stock insuficiente');
    return;
  }

  if(dir==='in'){
    const price=parseFloat(prompt('Precio unitario de compra'));
    if(!price||price<=0) return;

    costs.unshift({
      date:new Date().toLocaleString(),
      model:item.model,
      qty,
      price,
      total:qty*price
    });

    write(K_COSTS,costs);
  }

  item.qty+=dir==='in'?qty:-qty;

  logs.unshift({
    date:new Date().toLocaleString(),
    model:item.model,
    action:dir==='in'?'Entrada':'Salida',
    qty
  });

  write(K_STOCK,stock);
  write(K_LOG,logs);
  render();
}

function removeItem(id){
  const item=stock.find(i=>i.id===id);
  if(!item) return;

  if(!confirm(`Eliminar ${item.model} (${item.desc})?`)) return;

  stock=stock.filter(i=>i.id!==id);
  write(K_STOCK,stock);
  render();
}

function render(){
  const s=search.value.toLowerCase();

  table.innerHTML=stock
    .filter(i=>!s||i.model.toLowerCase().includes(s))
    .map(i=>`
    <tr>
      <td>${i.model}</td>
      <td><span class="badge ${i.type}">${i.type}</span></td>
      <td>${i.desc||'-'}</td>
      <td>${i.qty}</td>
      <td class="actions">
        <button class="in" onclick="move(${i.id},'in')">‚ûï</button>
        <button class="out" onclick="move(${i.id},'out')">‚ûñ</button>
        <button class="del" onclick="removeItem(${i.id})">üóëÔ∏è</button>
      </td>
    </tr>`).join('');

  logsT.innerHTML=logs.map(l=>`
    <tr>
      <td>${l.date}</td>
      <td>${l.model}</td>
      <td>${l.action}</td>
      <td>${l.qty}</td>
    </tr>`).join('');

  costsT.innerHTML=costs.map(c=>`
    <tr>
      <td>${c.date}</td>
      <td>${c.model}</td>
      <td>${c.qty}</td>
      <td>C$${c.price}</td>
      <td>C$${c.total}</td>
    </tr>`).join('');
}

const modelInput=document.getElementById('model');
const descInput=document.getElementById('desc');
const typeSelect=document.getElementById('type');
const search=document.getElementById('search');
const logsT=document.getElementById('logs');
const costsT=document.getElementById('costs');

search.oninput=render;
render();
</script>

</body>
</html>
